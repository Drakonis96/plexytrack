<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plex Trakt Sync</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="container">
    <img src="/static/logo.png" alt="Logo" class="logo">
    <h1>Plex/Trakt Sync</h1>
    <form method="post" class="form-bordered">
        <label for="minutes">Sync every (minutes):</label>
        <input type="number" id="minutes" name="minutes" min="1" value="{{ minutes }}" class="input-bordered">
        
        <div class="options">
            <label class="option-label">
                <input type="checkbox" name="collection" {% if collection %}checked{% endif %}>
                Sync collection
            </label>
            <label class="option-label">
                <input type="checkbox" name="ratings" {% if ratings %}checked{% endif %}>
                Sync ratings
            </label>
            <label class="option-label">
                <input type="checkbox" name="watched" {% if watched %}checked{% endif %}>
                Sync watched history
            </label>
            <label class="option-label">
                <input type="checkbox" name="liked_lists" {% if liked_lists %}checked{% endif %}>
                Sync liked lists
            </label>
            <label class="option-label">
                <input type="checkbox" name="watchlists" {% if watchlists %}checked{% endif %}>
                Sync watchlists
            </label>
        </div>
        
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button type="submit" id="syncBtn">Sync</button>
            <form method="post" action="{{ url_for('stop') }}" style="margin: 0;">
                <button type="submit" id="stopBtn">Stop Sync</button>
            </form>
        </div>
        
        <div id="confirmationMessage" class="confirmation-message" style="display: none;"></div>
    </form>
    
    <script>
        document.getElementById('syncBtn').addEventListener('click', function() {
            setTimeout(function() {
                showConfirmationMessage('Sync settings updated successfully!', 'success');
            }, 100);
        });
        
        document.getElementById('stopBtn').addEventListener('click', function() {
            setTimeout(function() {
                showConfirmationMessage('Sync stopped successfully!', 'success');
            }, 100);
        });
        
        function showConfirmationMessage(message, type) {
            const messageDiv = document.getElementById('confirmationMessage');
            messageDiv.textContent = message;
            messageDiv.className = 'confirmation-message ' + type;
            messageDiv.style.display = 'block';
            
            // Hide message after 3 seconds
            setTimeout(function() {
                messageDiv.style.display = 'none';
            }, 3000);
        }
    </script>
</div>
</body>
</html>
