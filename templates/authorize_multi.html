<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlexyTrack - Authorize Platforms</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="PlexyTrack Logo" class="logo">
            <h1>PlexyTrack</h1>
        </header>

        <main class="content-area">
            <section class="authorize-section card">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon"><path d="M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM11 11V7H13V11H17V13H13V17H11V13H7V11H11Z"></path></svg>
                    Platforms Authorization Required
                </h2>
                <p class="description">Authorize PlexyTrack to access your accounts. Follow the links below and enter the PIN codes.</p>

                <div class="auth-steps">
                    {% if trakt_required %}
                    <p>Authorize Trakt and copy the PIN code:</p>
                    <a href="{{ trakt_auth_url }}" target="_blank" class="button primary auth-link">Go to Trakt</a>
                    {% endif %}
                    {% if simkl_required %}
                    <p>Authorize Simkl and copy the PIN code:</p>
                    <a href="{{ simkl_auth_url }}" target="_blank" class="button primary auth-link">Go to Simkl</a>
                    {% endif %}
                    <p>Enter the codes and submit:</p>
                </div>

                <form method="post" class="auth-form">
                    <input type="hidden" name="platform" value="both">
                    {% if trakt_required %}
                    <div class="form-group">
                        <label for="trakt_code">Trakt PIN Code:</label>
                        <input type="text" id="trakt_code" name="trakt_code" placeholder="Enter Trakt PIN Code" class="form-input" required>
                    </div>
                    {% endif %}
                    {% if simkl_required %}
                    <div class="form-group">
                        <label for="simkl_code">Simkl PIN Code:</label>
                        <input type="text" id="simkl_code" name="simkl_code" placeholder="Enter Simkl PIN Code" class="form-input" required>
                    </div>
                    {% endif %}
                    <button type="submit" class="button secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon"><path d="M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM10.6212 15.5354L12.0354 16.9496L16.9496 12.0354L15.5354 10.6212L12.0354 14.1212L9.20702 11.2928L7.79281 12.707L10.6212 15.5354Z"></path></svg>
                        Submit Codes
                    </button>
                </form>
            </section>
        </main>

        <footer class="app-footer">
            <p>&copy; 2025 PlexyTrack. All rights reserved.</p>
        </footer>
    </div>
</body>
</html>
